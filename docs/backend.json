{
  "entities": {
    "Therapist": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Therapist",
      "type": "object",
      "description": "Represents a physiotherapy therapist.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Therapist's full name."
        },
        "title": {
          "type": "string",
          "description": "Therapist's professional title."
        },
        "bio": {
          "type": "string",
          "description": "Biography of the therapist, including qualifications and specializations."
        },
        "imageId": {
          "type": "string",
          "description": "ID for the placeholder image."
        },
        "specializations": {
          "type": "array",
          "description": "List of specializations for the therapist.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "name",
        "title",
        "bio",
        "imageId",
        "specializations"
      ]
    },
    "Product": {
      "title": "Product",
      "type": "object",
      "description": "Represents a product sold in the e-commerce store.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the product."
        },
        "description": {
          "type": "string",
          "description": "Description of the product."
        },
        "price": {
          "type": "number",
          "description": "Price of the product."
        },
        "imageId": {
          "type": "string",
          "description": "ID for the placeholder image."
        }
      },
      "required": [
        "name",
        "description",
        "price",
        "imageId"
      ]
    },
    "Condition": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Condition",
      "type": "object",
      "description": "Represents a medical condition that physiotherapy can treat.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the condition."
        },
        "slug": {
          "type": "string",
          "description": "URL-friendly slug for the condition."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the condition, including symptoms and causes."
        },
        "treatmentOptions": {
          "type": "string",
          "description": "Summary of available physiotherapy treatment options."
        }
      },
      "required": [
        "name",
        "slug",
        "description",
        "treatmentOptions"
      ]
    },
    "TreatmentGuide": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Treatment Guide",
      "type": "object",
      "description": "Represents an expert-guided exercise guide for patient recovery.",
      "properties": {
        "title": {
          "type": "string",
          "description": "The title of the treatment guide."
        },
        "description": {
          "type": "string",
          "description": "A brief description of what the guide is for."
        },
        "imageId": {
          "type": "string",
          "description": "ID for the placeholder image for the guide."
        },
        "steps": {
          "type": "array",
          "description": "An array of steps for the guide.",
          "items": {
            "type": "object",
            "properties": {
              "title": {
                "type": "string",
                "description": "The title of the step."
              },
              "instructions": {
                "type": "string",
                "description": "The detailed instructions for the step."
              }
            },
            "required": [
              "title",
              "instructions"
            ]
          }
        }
      },
      "required": [
        "title",
        "description",
        "imageId",
        "steps"
      ]
    },
    "Appointment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Appointment",
      "type": "object",
      "description": "Represents a booked physiotherapy appointment.",
      "properties": {
        "patientName": {
          "type": "string",
          "description": "Name of the patient."
        },
        "email": {
          "type": "string",
          "description": "Email address of the patient.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the patient."
        },
        "appointmentDateTime": {
          "type": "string",
          "description": "Date and time of the appointment in ISO format.",
          "format": "date-time"
        },
        "therapistId": {
          "type": "string",
          "description": "ID of the therapist for this appointment."
        },
        "status": {
          "type": "string",
          "description": "Status of the appointment.",
          "enum": [
            "pending",
            "confirmed",
            "cancelled"
          ]
        }
      },
      "required": [
        "patientName",
        "email",
        "phoneNumber",
        "appointmentDateTime",
        "therapistId",
        "status"
      ]
    },
    "ContactFormSubmission": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ContactFormSubmission",
      "type": "object",
      "description": "Represents a submission from the contact form.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the person submitting the form."
        },
        "email": {
          "type": "string",
          "description": "Email address of the person submitting the form.",
          "format": "email"
        },
        "subject": {
          "type": "string",
          "description": "The subject of the message."
        },
        "message": {
          "type": "string",
          "description": "The message submitted through the contact form."
        },
        "submittedAt": {
          "type": "string",
          "description": "Date and time of the form submission.",
          "format": "date-time"
        }
      },
      "required": [
        "name",
        "email",
        "subject",
        "message",
        "submittedAt"
      ]
    },
    "TherapistAvailability": {
      "title": "Therapist Availability",
      "type": "object",
      "description": "Represents the available time slots for a therapist on a specific date.",
      "properties": {
        "timeSlots": {
          "type": "array",
          "description": "List of available time slots in HH:mm format.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "timeSlots"
      ]
    }
  },
  "auth": {
    "providers": [
      "google.com",
      "phone"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/therapists/{therapistId}",
        "definition": {
          "entityName": "Therapist",
          "schema": {
            "$ref": "#/backend/entities/Therapist"
          },
          "description": "Stores therapist profiles.",
          "params": [
            {
              "name": "therapistId",
              "description": "Unique identifier for the therapist."
            }
          ]
        }
      },
      {
        "path": "/products/{productId}",
        "definition": {
          "entityName": "Product",
          "schema": {
            "$ref": "#/backend/entities/Product"
          },
          "description": "Stores product information for the e-commerce store.",
          "params": [
            {
              "name": "productId",
              "description": "Unique identifier for the product."
            }
          ]
        }
      },
      {
        "path": "/conditions/{conditionId}",
        "definition": {
          "entityName": "Condition",
          "schema": {
            "$ref": "#/backend/entities/Condition"
          },
          "description": "Stores information about medical conditions.",
          "params": [
            {
              "name": "conditionId",
              "description": "Unique identifier for the condition, typically a slug."
            }
          ]
        }
      },
      {
        "path": "/treatmentGuides/{guideId}",
        "definition": {
          "entityName": "TreatmentGuide",
          "schema": {
            "$ref": "#/backend/entities/TreatmentGuide"
          },
          "description": "Stores treatment guides with steps.",
          "params": [
            {
              "name": "guideId",
              "description": "Unique identifier for the treatment guide."
            }
          ]
        }
      },
      {
        "path": "/therapists/{therapistId}/appointments/{appointmentId}",
        "definition": {
          "entityName": "Appointment",
          "schema": {
            "$ref": "#/backend/entities/Appointment"
          },
          "description": "Stores appointment bookings, nested under the respective therapist.",
          "params": [
            {
              "name": "therapistId",
              "description": "Unique identifier for the therapist."
            },
            {
              "name": "appointmentId",
              "description": "Unique identifier for the appointment."
            }
          ]
        }
      },
      {
        "path": "/therapists/{therapistId}/availability/{date}",
        "definition": {
          "entityName": "TherapistAvailability",
          "schema": {
            "$ref": "#/backend/entities/TherapistAvailability"
          },
          "description": "Stores available time slots for a therapist for a specific day. The document ID is the date in YYYY-MM-DD format.",
          "params": [
            {
              "name": "therapistId",
              "description": "Unique identifier for the therapist."
            },
            {
              "name": "date",
              "description": "The date in YYYY-MM-DD format."
            }
          ]
        }
      },
      {
        "path": "/contactFormSubmissions/{contactFormSubmissionId}",
        "definition": {
          "entityName": "ContactFormSubmission",
          "schema": {
            "$ref": "#/backend/entities/ContactFormSubmission"
          },
          "description": "Stores contact form submissions for review.",
          "params": [
            {
              "name": "contactFormSubmissionId",
              "description": "Unique identifier for the contact form submission."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to efficiently manage physiotherapy-related data while prioritizing security and scalability. It leverages path-based ownership and structural segregation to simplify security rules and ensure data integrity.  Therapist, Condition, and TreatmentGuide data are stored in root-level collections, intended to be globally available. Appointments are stored within a therapist's document for easy retrieval. ContactFormSubmissions are stored in a dedicated collection for review. A dedicated `admins` collection is used to manage user privileges for administrative tasks. \n\nAuthorization Independence is achieved by not relying on `get()` calls in security rules, except for checking admin status. Data requiring specific access controls (e.g., user-specific data, collaborative content) would need to denormalize authorization-related data into the documents themselves.\n\nThis structure supports QAPs by:\n\n*   Segregating data based on access requirements. Public data (Therapists, Conditions, TreatmentGuides) are stored separately from potentially private data (Appointments, ContactFormSubmissions).\n*   Leveraging path-based ownership for user-specific data, enabling secure list operations based on user ID.\n*   Providing a clear and secure mechanism for admin-level access control."
  }
}
